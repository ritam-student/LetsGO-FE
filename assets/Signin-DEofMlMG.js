import{u as O,r as c,j as e,X as P,L as h,b as r}from"./index-CvtE0vql.js";import{a as b}from"./index-t--hEgTQ.js";import"./react-DJG_os-6.js";import"./swiper-B7pBPPGb.js";function D({setUser:v,setIsLoggedIn:w}){const d=O(),k="https://letsgo-be.onrender.com",l=c.useRef(null),o=c.useRef(null),[x,u]=c.useState(!1),[y,i]=c.useState(!1);function m(){const a=localStorage.getItem("activeLink");d(!a||a==="/"?"/":`/${a}`)}async function j(){var a,p,f,g;if(((a=o.current)==null?void 0:a.value)===void 0||o.current.value==="")(p=o.current)==null||p.focus(),console.log("emailRef");else if(((f=l.current)==null?void 0:f.value)===void 0||l.current.value==="")(g=l.current)==null||g.focus(),console.log("passwordRef");else{const S=o.current.value,E=l.current.value;try{i(t=>!t);let s;try{s=await b.post(`${k}/api/v1/user/signin`,{email:S,password:E})}catch(t){if(i(n=>!n),b.isAxiosError(t)&&t.response){const n=t.response.status;n===404?(r.fire({icon:"error",title:"Oops...",text:"Invalid input. Please check your details.....",confirmButtonText:"Ok"}),console.log("Invalid input. Please check your details."),o.current.focus(),u(!0)):n===403?(r.fire({icon:"error",title:"Oops...",text:"User does not exist. Please signup....",confirmButtonText:"Ok"}),console.log("User does not exist. Please signup..."),o.current.focus(),u(N=>!N)):n===402?(r.fire({icon:"error",title:"Oops...",text:"Invalid credentials. Please check....",confirmButtonText:"Ok"}),console.log("Invalid credentials. Please check...")):(r.fire({icon:"error",title:"Oops...",text:"Failed to sign in. Please try again later....",confirmButtonText:"Ok"}),console.log("Failed to sign in. Please try again later.")),console.error("Error response: ",t.response.data)}else r.fire({icon:"error",title:"Oops...",text:"Something went wrong. Please try again later....",confirmButtonText:"Ok"}),console.error("Unexpected error: ",t);return}console.log(s),localStorage.setItem("token",s.data.data.token),localStorage.setItem("userImgUrl",s.data.data.userData.imageUrl),localStorage.setItem("sellerToken",s.data.data.sellerToken),v(s.data.data.userData),console.log("token : ",s.data.data.token),console.log("user details : ",s.data.data.userData),u(t=>!t),i(t=>!t),w(!0),r.fire({title:"sucess",text:"Sign in Sucessfully...",icon:"success",timer:3e3,confirmButtonText:"OK"}),m()}catch(s){r.fire({icon:"error",title:"Oops...",text:"Something went wrong. Try after sometimes....",confirmButtonText:"Ok"}),i(t=>!t),console.log("error is : "+s)}}}return e.jsx("div",{className:"h-auto w-full text-black font-semibold text-xl flex items-center justify-center bg-[#fab1a0] py-16 ",children:e.jsxs("div",{className:"relative bg-[#FEA47F] shadow-lg shadow-gray-400  w-[300px] md:w-[400px] lg:w-[600px] flex px-9 py-4 md:py-6 lg:py-8 rounded-xl  flex-col",children:[e.jsx(P,{onClick:m,className:" cursor-pointer absolute right-5 hover:border-2 hover:border-black rounded-md text-black "}),e.jsx("h2",{className:"text-4xl text-black  font-bold mt-[5vh] text-center  ",children:"sign in"}),e.jsxs("div",{className:"mt-[12vh] ",children:[e.jsxs("div",{className:"relative",children:[e.jsx("p",{children:"Email : "}),e.jsx("input",{type:"email",ref:o,placeholder:"Enter your Email",className:`rounded-xl shadow-sm shadow-gray-500 text-white border-none bg-slate-900 focus:outline-blue-500 w-full my-5 h-[40px] px-4  ${x?"focus:outline-red-600":""} `}),x&&e.jsx("div",{className:"absolute text-red-500 right-1 -bottom-1",children:"* Email already exist"})]}),e.jsx("p",{children:"Pasword : "}),e.jsx("input",{type:"password",ref:l,placeholder:"Enter your password",className:"rounded-xl text-white border-none bg-slate-900 focus:outline-blue-500 w-full my-5 h-[40px] px-4  "})]}),e.jsx(h,{to:"/forgetPassword",className:"text-right text-blue-800 cursor-pointer ",children:"Forget Password ?"}),e.jsxs("span",{className:"text-right cursor-pointer text-black",children:["Don't have an account ? ",e.jsx(h,{to:"/signup",className:"text-blue-800",children:" sign up"})," "]}),e.jsx("button",{className:"bg-black text-white hover:bg-slate-950 hover:scale-105 rounded-2xl font-bold text-xl px-8 py-1 mt-[10vh] cursor-pointer  ",onClick:j,children:y?"Submitting...":"Submit"})]})})}export{D as default};
