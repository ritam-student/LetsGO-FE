import{u as q,r as o,j as e,X as z,L as H,b as a}from"./index-CvtE0vql.js";import{a as g}from"./index-t--hEgTQ.js";import"./react-DJG_os-6.js";import"./swiper-B7pBPPGb.js";function W(){const h=q(),U="ritam-backend",B="LetsGO",I="https://api.cloudinary.com/v1_1/ritam-backend/image/upload",L="https://letsgo-be.onrender.com",n=o.useRef(null),i=o.useRef(null),c=o.useRef(null),u=o.useRef(null),[y,$]=o.useState(null),[b,F]=o.useState(""),[w,v]=o.useState(!1),[N,j]=o.useState(!1),[C,d]=o.useState(!1);function k(){const r=localStorage.getItem("activeLink");h(!r||r==="/"?"/":`/${r}`)}async function _(){var r,l,E,O,R,S,T,P;if(((r=n.current)==null?void 0:r.value)===void 0||n.current.value==="")(l=n.current)==null||l.focus(),console.log("userNameRef");else if(((E=i.current)==null?void 0:E.value)===void 0||i.current.value==="")(O=i.current)==null||O.focus(),console.log("emailRef");else if(((R=c.current)==null?void 0:R.value)===void 0||c.current.value==="")(S=c.current)==null||S.focus(),console.log("passwordRef");else if(((T=u.current)==null?void 0:T.value)===void 0||u.current.value==="")(P=u.current)==null||P.focus(),console.log("countryRef");else if(!y)a.fire({icon:"error",title:"Oops...",text:"Please upload an image...",confirmButtonText:"Ok"});else{const D=n.current.value,G=i.current.value,K=c.current.value,X=u.current.value,m=new FormData;m.append("file",y),m.append("upload_preset",`${B}`),m.append("cloud_name",`${U}`),d(s=>!s);let p;try{p=(await g.post(`${I}`,m)).data.secure_url}catch(s){d(t=>!t),console.log("error is ",s),a.fire({icon:"error",title:"Oops...",text:"Error while uploading image, Please try after sometime...",confirmButtonText:"Ok"});return}console.log(p);try{let s;try{s=await g.post(`${L}/api/v1/user/signup`,{userName:D,email:G,password:K,country:X,imageUrl:p})}catch(t){if(d(x=>!x),g.isAxiosError(t)&&t.response){const x=t.response.status;x===400?(a.fire({icon:"error",title:"Oops...",text:"Invalid input. Please check your details....",confirmButtonText:"Ok"}),console.log("Invalid input. Please check your details.")):x===409?(a.fire({icon:"error",title:"Oops...",text:"email already exists. Try logging in.....",confirmButtonText:"Ok"}),console.log("email already exists. Try logging in."),i.current.focus(),j(f=>!f)):x===410?(a.fire({icon:"error",title:"Oops...",text:"eusername already exists. Try logging in.....",confirmButtonText:"Ok"}),console.log("username already exists. Try logging in."),n.current.focus(),v(f=>!f)):(a.fire({icon:"error",title:"Oops...",text:"Failed to create an account. Please try again later.....",confirmButtonText:"Ok"}),console.log("Failed to create an account. Please try again later.")),console.error("Error response: ",t.response.data)}else a.fire({icon:"error",title:"Oops...",text:"Something went wrong. Please try again later.....",confirmButtonText:"Ok"}),console.error("Unexpected error: ",t);return}console.log(s.data),j(t=>!t),v(t=>!t),d(t=>!t),a.fire({title:"sucess",text:"Sign up Sucessfully...",icon:"success",timer:3e3,confirmButtonText:"OK"}),k()}catch(s){a.fire({icon:"error",title:"Oops...",text:"Something went wrong. Please try again later.....",confirmButtonText:"Ok"}),d(t=>!t),console.log("error is : "+s)}}}function A(r){const l=r.target.files?r.target.files[0]:null;l&&($(l),console.log(l),F(URL.createObjectURL(l)))}return e.jsx("div",{className:"h-auto w-full bg-[#fab1a0]  text-black font-semibold text-xl flex items-center justify-center py-15",children:e.jsxs("div",{className:"relative  bg-[#FEA47F] shadow-lg shadow-gray-400    w-[300px] md:w-[400px] lg:w-[600px] flex px-6 py-4 md:py-6 lg:py-8 rounded-xl  flex-col ",children:[e.jsx(z,{onClick:k,className:" cursor-pointer absolute right-5 hover:border-2 hover:border-black rounded-md text-black"}),e.jsx("h2",{className:"text-4xl text-black  font-semibold mt-[4vh] text-center ",children:"sign up"}),e.jsxs("div",{className:"mt-[8vh] ",children:[e.jsxs("div",{className:"relative",children:[e.jsx("p",{children:"UserName : "}),e.jsx("input",{type:"text",ref:n,placeholder:"Enter your UserName",className:`rounded-xl shadow-sm shadow-gray-500 text-white border-none bg-slate-900 focus:outline-blue-500 w-full my-5 h-[40px] px-4  ${w?"focus:outline-red-600":""} `}),w&&e.jsx("div",{className:"absolute text-red-500 right-1 -bottom-1",children:"* UserName already exist"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("p",{children:"Email : "}),e.jsx("input",{type:"email",ref:i,placeholder:"Enter your Email",className:`rounded-xl shadow-sm shadow-gray-500 text-white border-none bg-slate-900 focus:outline-blue-500 w-full my-5 h-[40px] px-4  ${N?"focus:outline-red-600":""} `}),N&&e.jsx("div",{className:"absolute text-red-500 right-1 -bottom-1",children:"* Email already exist"})]}),e.jsx("p",{children:"Pasword : "}),e.jsx("input",{type:"password",ref:c,placeholder:"Enter your password",className:"rounded-xl shadow-sm shadow-gray-500  text-white border-none bg-slate-900 focus:outline-blue-500 w-full my-5 h-[40px] px-4  "}),e.jsx("p",{children:"Country : "}),e.jsx("input",{type:"text",ref:u,placeholder:"Enter your country",className:"rounded-xl  shadow-sm shadow-gray-500 text-white border-none bg-slate-900 focus:outline-blue-500 w-full my-5 h-[40px] px-4  "}),e.jsx("p",{children:"UserImage :  "}),e.jsx("input",{type:"file",accept:"images/*",onChange:A,className:"rounded-xl  shadow-sm shadow-gray-500 text-white border-none bg-slate-900 focus:outline-blue-500 w-full my-5 h-[40px] px-4  cursor-pointer"}),b&&e.jsx("img",{src:b,alt:"Preview",className:"max-w-[200px]"})]}),e.jsxs("span",{className:"mt-2 text-right cursor-pointer text-black",children:["Already have an account ? ",e.jsx(H,{to:"/signin",className:"text-blue-900",children:" sign in"})," "]}),e.jsx("button",{className:"bg-black  text-white rounded-2xl font-bold text-xl px-8 py-1 mt-[6vh] cursor-pointer hover:bg-slate-950 hover:scale-105",onClick:_,children:C?"Submitting...":"Submit"})]})})}export{W as default};
